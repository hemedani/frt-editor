!function(){"use strict";function e(){function e(){return{post:function(e,a,s){e.iframeT=a.find("iframe"),e.iframeT0=a.find("iframe")[0],e.texFi=a.find("textarea"),e.ghabevirayesh=a.find("ghabevirayesh"),e.iframeT0.contentDocument.designMode="on";var o='<link href="https://cdn.rawgit.com/rastikerdar/vazir-font/v4.4.0/dist/font-face.css" rel="stylesheet" type="text/css" /><link href="https://cdn.rawgit.com/rastikerdar/shabnam-font/v1.0.2/dist/font-face.css" rel="stylesheet" type="text/css" /><link href="https://cdn.rawgit.com/rastikerdar/gandom-font/v0.4.4/dist/font-face.css" rel="stylesheet" type="text/css" /><link href="https://cdn.rawgit.com/hemedani/tanha-font/v0.3.0/font-face.css" rel="stylesheet" type="text/css" /><link href="https://cdn.rawgit.com/rastikerdar/sahel-font/v1.0.0-alpha6/dist/font-face.css" rel="stylesheet" type="text/css" /><style type=\'text/css\'> body {direction:rtl;background-color: rgba(255,255,228,0.5);padding:0.5rem 1rem;font-family: \'Vazir\', sans-serif;} .teamamaks {width:100%} .h_iframe-aparat_embed_frame{position:relative;} .h_iframe-aparat_embed_frame .ratio {display:block;width:100%;height:auto;} .h_iframe-aparat_embed_frame iframe {position:absolute;top:0;left:0;width:100%; height:100%;}blockquote{position:relative;width:100%;height:auto;margin:2rem auto 0 auto;color:#edf0f9;overflow:visible}blockquote img{width:5.5rem;height:5.5rem;border-radius:50%;position:absolute;top:-1.5rem;right:1rem;z-index:2}blockquote .esm-block{padding:.1rem 2rem .1rem .5rem;background-color:#6e7480;font-size:.8rem;position:absolute;top:.4rem;right:5rem;z-index:1}blockquote .semat-block{padding:.1rem 3rem .1rem .5rem;background-color:#6e7480;font-size:.8rem;position:absolute;top:2rem;right:4rem;z-index:1}blockquote .matn-block{background-color:#2b2d32;padding:5.5rem 1.8rem 1rem 1rem}blockquote .matn-block:before{content:\'\';position:absolute;right:1rem;top:5.2rem;border-right:2px solid #6e7480;height:calc(100% - 5.8rem)} </style>';e.iframeT.contents().find("head").append(o),e.ngModel&&e.iframeT.contents().find("body").append(e.ngModel),e.nemayesh=function(s){switch(s){case"txa":e.texFi.toggleClass("roshan");break;case"faal":"off"===e.iframeT0.contentDocument.designMode&&(e.iframeT0.contentDocument.designMode="on",e.iframeT.contents().find("head").append(o),e.ngModel&&e.iframeT.contents().find("body").append(e.ngModel)),console.log("faal Iframe> ",e.iframeT0.contentDocument.designMode);break;case"video":a.find("frt-video").toggleClass("roshan"),a.find("frt-aks").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-block").removeClass("roshan");break;case"aks":a.find("frt-aks").toggleClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-block").removeClass("roshan");break;case"aksbk":a.find("frt-aksbk").toggleClass("roshan"),a.find("frt-aks").removeClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-block").removeClass("roshan");break;case"font":a.find("frt-font").toggleClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-aks").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-block").removeClass("roshan");break;case"link":a.find("frt-link").toggleClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-aks").removeClass("roshan"),a.find("frt-block").removeClass("roshan");break;case"blokQ":a.find("frt-block").toggleClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-aks").removeClass("roshan")}},e.baste=function(){a.find("frt-block").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-font").removeClass("roshan"),a.find("frt-video").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-aks").removeClass("roshan")},e.iframeT.contents().bind("keyup",function(){e.$apply(function(){e.texFi.val(e.iframeT.contents()[0].body.innerHTML),e.ngModel=e.iframeT.contents()[0].body.innerHTML})}),e.dastorat={vasNev:[{neveshte:"د",tooltip:"درشت (Bold)",dastor:"bold"},{neveshte:"ا",tooltip:"ایتالیک (italic)",dastor:"italic"},{neveshte:"خ ز",tooltip:"خط زیر (Underline)",dastor:"underline"},{neveshte:"خ ا",tooltip:"خط افقی (HorizontalRule)",dastor:"insertHorizontalRule"},{neveshte:"ل ش",tooltip:"لیست شماره ای (OrderedList)",dastor:"insertOrderedList"},{neveshte:"ل ب",tooltip:"لیست بی شماره ای (UnorderedList)",dastor:"insertUnorderedList"},{neveshte:"پ",tooltip:"پاک کردن قالب بندی (removeFormat)",dastor:"removeFormat"},{neveshte:"آن",tooltip:"زدودن لینک (unlink)",dastor:"unlink"}],vasDogm:[{dastor:"aks",esm:"عکس"},{dastor:"aksbk",esm:"عکس۲"},{dastor:"video",esm:"آپارات"},{dastor:"font",esm:"فونت"},{dastor:"blokQ",esm:"نظر"},{dastor:"link",esm:"لینک"},{dastor:"txa",esm:"کدها"}],fontha:[{dastor:"Vazir",esm:"وزیــــر"},{dastor:"Shabnam",esm:"شبنــــم"},{dastor:"Gandom",esm:"گنـــــدم"},{dastor:"Tanha",esm:"تنهــــا"},{dastor:"Sahel",esm:"ساحـــل"}]},e.execIn=function(s,o){if(e.aksbakellas&&(o='<img class="teamamaks" src="'+e.aksbakellas+'" >'),e.vimodel){var t=e.vimodel.split("/v/")[1];o='<div class="h_iframe-aparat_embed_frame"> <span style="display: block;padding-top: 57%"></span><iframe src="https://www.aparat.com/video/video/embed/videohash/'+t+'/vt/frame" allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe></div>'}e.aksblmodel&&e.esmblmodel&&e.sematblmodel&&e.matnblmodel&&(console.log("nazar vojod dare!!"),o='<blockquote><img src="'+e.aksblmodel+'"/><span class="esm-block">'+e.esmblmodel+'</span><span class="semat-block">'+e.sematblmodel+'</span><div class="matn-block">'+e.matnblmodel+"</div></blockquote>"),console.log("cmd val :->",s+" | "+o),e.iframeT0.contentDocument.execCommand(s,null,o),e.texFi.val(e.iframeT.contents()[0].body.innerHTML),e.ngModel=e.iframeT.contents()[0].body.innerHTML,e.aksmodel="",e.aksmodelkellas="",e.vimodel="",e.linmodel="",e.aksblmodel="",e.esmblmodel="",e.sematblmodel="",e.matnblmodel="",e.aksbakellas="",a.find("frt-video").removeClass("roshan"),a.find("frt-aks").removeClass("roshan"),a.find("frt-aksbk").removeClass("roshan"),a.find("frt-link").removeClass("roshan"),a.find("frt-block").removeClass("roshan")}}}}return{restrict:"E",replace:!0,templateUrl:"barname/html/frt.editor.tmd.html",scope:{ngPattern:"@",ngChange:"&ngChange",ngRequired:"=",ngMinlength:"=",ngMaxlength:"=",ngTrim:"=",ngModel:"="},compile:e}}angular.module("frtEditor",[]).directive("frtEditor",e)}(),angular.module("barname").run(["$templateCache",function(e){e.put("barname/html/frt.editor.tmd.html",'<div class="rteditor"><div class="dogmeha-rt"><div class="vas-nev-div"><span ng-repeat="das in dastorat.vasNev" ng-class="(\'frtc-\' + das.dastor)" ng-click="execIn(das.dastor, null)" class="dogme i-sorme i-gerd dogme-ov"> \n{{ das.neveshte }}<div class="tooltip">{{ das.tooltip }}</div></span></div><div class="vas-dog-div"><span ng-if="iframeT0.contentDocument.designMode === \'off\'" ng-click="nemayesh(\'faal\')" class="dogme i-sorme i-gerd dogme-ov">فعال</span><span ng-repeat="dogm in dastorat.vasDogm" ng-click="nemayesh(dogm.dastor)" class="dogme i-sorme i-gerd dogme-ov">{{dogm.esm}}</span></div><div class="form-item"><frt-video class="form-tak taki khamosh"><label>آپارات :</label><input type="text" ng-model="vimodel"/><div class="baraks-f"><span ng-click="execIn(\'insertHTML\', vimodel)" class="dogme i-sorme i-gerd i-ghabol"></span><span ng-click="baste()" class="dogme i-ghermez i-gerd i-rad"></span></div></frt-video><frt-aks class="form-tak taki khamosh"><label>عکس :</label><input type="text" ng-model="aksmodel"/><div class="baraks-f"><span ng-click="execIn(\'insertImage\', aksmodel)" class="dogme i-sorme i-gerd i-ghabol"></span><span ng-click="baste()" class="dogme i-ghermez i-gerd i-rad"></span></div></frt-aks><frt-aksbk class="form-tak taki khamosh"><label>عکس۲ :</label><input type="text" ng-model="aksbakellas"/><div class="baraks-f"><span ng-click="execIn(\'insertHTML\', aksbakellas)" class="dogme i-sorme i-gerd i-ghabol"></span><span ng-click="baste()" class="dogme i-ghermez i-gerd i-rad"></span></div></frt-aksbk><frt-link class="form-tak taki khamosh"><label>لینک :</label><input type="text" ng-model="linmodel"/><div class="baraks-f"><span ng-click="execIn(\'createLink\', linmodel)" class="dogme i-sorme i-gerd i-ghabol"></span><span ng-click="baste()" class="dogme i-ghermez i-gerd i-rad"></span></div></frt-link><frt-block class="form-tak taki khamosh"><label>اظهار نظرات :</label><input type="text" ng-model="aksblmodel" placeholder="عکس"/><input type="text" ng-model="esmblmodel" placeholder="نام"/><input type="text" ng-model="sematblmodel" placeholder="سمت"/><input type="text" ng-model="matnblmodel" placeholder="متن"/><div class="baraks-f"><span ng-click="execIn(\'insertHTML\', nazarblmodel)" class="dogme i-sorme i-gerd i-ghabol"></span><span ng-click="baste()" class="dogme i-ghermez i-gerd i-rad"></span></div></frt-block></div><frt-font class="frt-font khamosh"><span ng-repeat="font in dastorat.fontha" ng-click="execIn(\'fontName\', font.dastor)" class="dogme i-sorme i-round"><font face="font.dastor">{{ font.esm }}</font></span></frt-font></div><div class="frame-rt"><iframe name="richtextfield" id="richtextfield">این متن قابل ویرایش است</iframe><br/><br/></div><textarea rows="8" ng-minlength="ngMinlength" ng-maxlength="ngMaxlength" ng-required="ngRequired" ng-pattern="ngPattern" ng-change="ngChange()" ng-trim="ngTrim" ng-model="ngModel" disabled="disabled" class="rt-texarea"></textarea></div>')}]);